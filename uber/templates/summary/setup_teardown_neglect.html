{% extends "base-admin.html" %}
{% block title %}Setup/Teardown Shifts{% endblock %}
{% block content %}

<h2> Setup/Teardown Neglect </h2>

{% for category, jobs in unfilled %}
    <h3> Unfilled {{ category }} Shifts </h3>
    <table style="width:auto">
    {% for job in jobs %}
        <tr>
            <td><a href="../jobs/form?id={{ job.id }}">{{ job.name }}</a></td>
            <td>{% timespan job %}</td>
            <td>{{ job.location_label }}</td>
            <td>{{ job.slots_taken }} / {{ job.slots_untaken }} slots filled</td>
        </tr>
    {% empty %}
        <i>none</i>
    {% endfor %}
    </table>
{% endfor %}

<h3> Attendees Without Appropriate Shifts </h3>

<table style="width:auto">
{% for attendee, reasons in attendees %}
    <tr>
        <td>{{ attendee|form_link }}</td>
        <td>{{ attendee.assigned_depts_labels|join:" / " }}</td>
        <td>{{ attendee.hotel_requests.nights_display }}</td>
    </tr>
    <tr>
        <td colspan="3">
            <ul>
            {% for reason in reasons %}
                <li>{{ reason }}</li>
            {% endfor %}
            </ul>
        </td>
    </tr>
{% endfor %}
</table>

{% endblock %}
