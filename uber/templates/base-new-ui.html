{% set admin_area=True %}
{% extends "base.html" %}

{#
This is a new base template that totally ignores uber's existing UI, and replaces it for any
pages that extend from this template with our own UI.

In this demo, we'll use ONLY Materialize on just, while leaving the rest of uber
untouched and using Bootstrap 3
#}

{% block head_styles %}
    {#
        IMPORTANT NOTE: We leave off {{ super() }}, so we don't inherit ANY of the ubersystem CSS
        and can start our CSS from scratch here without affecting other pages.

        This can be one page at a time in order to restyle ubersystem little by little, instead
        of needing to do everything all at once.

        This can also be done in the page template as well, if desired.
     #}
    <link rel="stylesheet" type="text/css" href="../static/styles/new-ui.css" />

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
{% endblock %}

{% block scripts %}
    {#
        We do use {{ super() }} here in order to use the default javascript from ubersystem,
        and then also add our own.

        This can also be done in the page template as well, if desired.
    #}
    {{ super() }}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

    <script>
        $(document).ready(function () {
            $('.button-collapse').sideNav(
                {
                    menuWidth: 300, // Default is 240
                    closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
                }
            );
            $('.collapsible').collapsible();
        });
    </script>
{% endblock %}

{% block backlink %}
    {% if admin_area %}
        {% for menu_item in c.MENU_JSON_DECODED %}

            {% if menu_item.submenu %}
                <ul id="{{ menu_item.name_key }}_dropdown" class="dropdown-content">

                    {% for submenu_item in menu_item.submenu %}
                        <li>
                            {% if submenu_item.href %}
                                <a href="{{ submenu_item.href }}">
                            {% else %}
                                <a class="disabled">
                            {% endif %}
                            {{ submenu_item.name }}</a>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}

        {% endfor %}

    <nav>
        <div class="nav-wrapper">
            <a href="../accounts/homepage" class="brand-logo">{{ c.EVENT_NAME }}</a>

            <ul class="right hide-on-med-and-down">
                {% for menu_item in c.MENU_JSON_DECODED %}
                    {% if menu_item.submenu %}
                        <li>
                            <a class="dropdown-button" href="#!" data-activates="{{ menu_item.name_key }}_dropdown">
                                {{ menu_item.name }}<i class="material-icons right">arrow_drop_down</i>
                            </a>
                        </li>
                    {% elif menu_item.href %}
                        <li>
                            <a href="{{ menu_item.href }}">{{ menu_item.name }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
                <li>Logged in as: {{ c.CURRENT_ADMIN.first_name }} {{ c.CURRENT_ADMIN.last_name }}</li>
            </ul>
        </div>
    </nav>
    <nav>
        <div class="red darken-2">
            <a href="../{{ breadcrumb_section_ }}" class="breadcrumb">{{ breadcrumb_section_pretty_ }}</a>
            <a href="../{{ breadcrumb_section_ }}/{{ breadcrumb_page_ }}" class="breadcrumb">
                {{ breadcrumb_page_pretty_ }}
            </a>
        </div>
    </nav>
    {% endif %}
{% endblock backlink %}