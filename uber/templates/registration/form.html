{% extends "base.html" %}{% set admin_area=True %}
{% import "fields/attendee.html" as attendee_fields with context %}
{% block title %}Attendee Form - {{ attendee.full_name }}{% endblock %}
{% block content %}

{% include "registration/menu.html" %}

<div class="panel panel-default">
<div class="panel-body">
<form method="post" action="form" class="form-horizontal">
{{ csrf_token() }}
{# Deprecated form included for backwards compatibility with old plugins #}
  {% include "regform.html" %}
<input type="hidden" name="id" value="{{ attendee.db_id }}" />
<input type="hidden" name="return_to" value="{{ return_to }}" />

{{ attendee_fields.created }}
{{ attendee_fields.signed_up }}
{{ attendee_fields.last_updated }}
{{ attendee_fields.checked_in }}

{% if attendee.regdesk_info %}
    <div class="form-group">
        <div class="col-sm-3 text-right">
          <span class="label label-danger">Special Regdesk Instructions:</span>
        </div>
        <div class="col-sm-9">
          {{ attendee.regdesk_info }}
          <p class="help-block"><em>You can update these instructions below</em></p>
        </div>
    </div>
{% endif %}

{{ attendee_fields.is_placeholder }}
{{ attendee_fields.badge_status }}
{% if c.HAS_ACCOUNTS_ACCESS %}
  {{ attendee_fields.admin_access }}
{% endif %}
{{ attendee_fields.badge_type }}
{{ attendee_fields.ribbons }}
{{ attendee_fields.group_link }}
{{ attendee_fields.promo_code_group_link }}
{{ attendee_fields.panel_app_link }}

{% block pre_regform %}{% endblock %}

{{ attendee_fields.name }}
{{ attendee_fields.badge_printed_name }}
{{ attendee_fields.age }}
{{ attendee_fields.email }}
{{ attendee_fields.emergency_contact }}
{{ attendee_fields.cellphone }}
{{ attendee_fields.address }}
{{ attendee_fields.amount_extra }}
{{ attendee_fields.shirt_size }}
{{ attendee_fields.extra_donation }}
{{ attendee_fields.promo_code }}
{{ attendee_fields.interests }}
{{ attendee_fields.found_how }}
{{ attendee_fields.comments }}
{{ attendee_fields.can_spam }}

{% block post_regform %}{% endblock %}

{{ attendee_fields.staffing }}
{{ attendee_fields.job_interests }}
{{ attendee_fields.assigned_depts }}
{{ attendee_fields.setup_teardown }}

{{ attendee_fields.got_merch }}

{{ attendee_fields.overridden_price }}
{{ attendee_fields.payment_method }}
{{ attendee_fields.paid }}

{{ attendee_fields.merch }}
{{ attendee_fields.staff_merch }}
{{ attendee_fields.regdesk_info }}
{{ attendee_fields.for_review }}
{{ attendee_fields.admin_notes }}

<div class="form-group">
    <div class="col-sm-9 col-sm-offset-3">
        <button type="submit" name="save" class="btn btn-primary" value="save_return_to_search">Save + return{% if not return_to %} to search{% endif %}</button>
        <button type="submit" name="save" class="btn btn-primary" value="save">Save</button>
    </div>
</div>

</form>

{% if not attendee.is_new %}
    <div style="margin-left:25%">
        <form method="post" action="delete" onSubmit="return confirm('{% if attendee.group and attendee.is_unassigned %}Are you sure you want to delete this unassigned badge?{% elif attendee.group %}Are you sure you want to unassign this badge?{% else %}Are you sure you want to delete this attendee?{% endif %}');" />
            {{ csrf_token() }}
            <input type="hidden" name="id" value="{{ attendee.id }}" />
            {% if return_to %}<input type="hidden" name="return_to" value="{{ return_to }}" />{% endif %}
            <br/><input type="submit" class="btn btn-danger" value="{% if attendee.group and attendee.is_unassigned %}Delete this group badge{% elif attendee.group %}Unassign this group badge{% else %}Delete Attendee{% endif %}"
                        {% if attendee.paid == c.HAS_PAID %} style="background-color:#BCBCBC" title="Cannot delete a paid badge." disabled {% endif %}/>
        </form>
    </div>

    {% if attendee.paid != c.LOST_BADGE %}
        <br/>
        <div style="margin-left:25%">
            <form method="post" action="lost_badge">
                <input type="hidden" name="id" value="{{ attendee.id }}" />
                <input type="submit" value="Report Lost Badge">
            </form>
        </div>
    {% endif %}
{% endif %}

</div>
</div>

{% endblock %}
